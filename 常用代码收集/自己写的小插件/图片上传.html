<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>上传图片</title>
	<style>
		.image-upload{ height: 100px; }
		/*原理：
			用display:inline-block将.fileinput-button设置为行内块，不能被内容撑起整行高度，input绝对定位后不占用父元素位置，将input移出.fileinput-button后overflow: hidden;
		*/
		.image-upload .fileinput-button{ position: relative; top: 50px; transform: translateY(-50%); left: 15px; overflow: hidden; display: inline-block; }
		/* ie浏览器（input样式会显示出来，加上opacity：0；就好了） */
		.image-upload .fileinput-button input{ position: absolute; right: 0px; top: 0; opacity: 0; outline: none; }
		.image-upload .image-upload-show{  margin: 20px 0; border-radius: 50%; width: 70px; height: 70px; float: right; margin-right: 15px;}
		/*因为上述原因不能给.fileinput-button设置宽高所以设置span的padding来设置宽高（mui框架的css所有按钮都是这样来写样式的，可复用）*/
		.image-upload .image-upload-button{ display: inline-block; text-align: center; line-height: 30px; padding: 0 10px; background-color: #FFBA4E; color: #fff; border-radius: 10px; }
	</style>
</head>
<body>
	<div class="image-upload">
		<div class="fileinput-button">
			<span class="image-upload-button">头像上传</span>
			<!--  
				1、安卓：加上capture 可以同时调用相册和相机， 没有加上capture则只能调用相册 
				2、IOS中： 加上capture，只能调相机， 没有capture 可以同时调用相册和相机 
			-->
			<input id="person_img" type="file">
		</div>
		<img class="image-upload-show" src="img/icon/userimg.svg" id="Image">
	</div>

	<script>
		//上传图片显示
        function getUrl(file) {
		var photo_data =  document.getElementById("person_img");
		// var file_name =  document.getElementById("file_name");
            var img = document.getElementById("Image");
            for (var intI = 0; intI < file.length; intI++) {//图片回显
			// console.log(file.length);
                var tmpFile = file[intI];
				// file_name.value = tmpFile.name;
                var reader = new FileReader();
                reader.readAsDataURL(tmpFile);
                reader.onload = function (e) {
                    var url = e.target.result;
                    img.src = url;
					photo_data.value = url;
                }
            }
        }

        window.onload = function(){
        	let oPersonImg = document.getElementById('person_img');
        	oPersonImg.onchange = function(){
        		console.log(this.files)
        		getUrl(this.files);
        	}
        }
	</script>
</body>
</html>